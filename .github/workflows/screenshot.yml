name: Edge浏览器网页连续截图

on:
  workflow_dispatch:  # 手动触发
  # schedule:  # 可选定时触发
  #   - cron: '0 * * * *'

jobs:
  screenshot:
    runs-on: windows-latest  # 必须用Windows环境
    steps:
      - name: 拉取代码
        uses: actions/checkout@v4

      - name: 安装Python和依赖
        run: |
          python --version
          pip install playwright

      - name: 安装Playwright的Edge驱动（关键：关联已装的Edge）
        run: playwright install msedge

      - name: 执行截图脚本
        run: python screenshot.py

      - name: 保存截图结果
        uses: actions/upload-artifact@v4
        with:
          name: edge-web-screenshots
          path: "edge-screenshot-*.png"

